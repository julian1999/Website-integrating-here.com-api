<!DOCTYPE html>
<html>

<head>
<link rel="stylesheet" href="stylesheet.css">
<link href="https://fonts.googleapis.com/css?family=Shadows+Into+Light+Two" rel="stylesheet"> 
<meta name="viewport" content="initial-scale=1.0, width=device-width" />
<link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.0/mapsjs-ui.css?dp-version=1533195059" />
<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-core.js"></script>
<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-service.js"></script>
<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-ui.js"></script>
<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-mapevents.js"></script>
<script type="text/javascript" src="dynamicNav.js"></script>
<link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
<script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
<script src="semantic/dist/semantic.min.js"></script>
</head>

<body>

    <!-- create the top bar with the title of webpage -->
    <div class"buttonDiv">
	    <ul>
  		    <li id="open"><button class="openbutton" onclick="openNav()">&equiv;</button></li>
  		    <li><h1> <center>Places Near Me</center> </h1></li>
                <label id="seach">Search: </label>
                <input type="text" placeholder="i.e. food">
	    </ul>
    </div>
  
    <!-- set up the side bar -->
    <div id="mySidebar" class="sidebar">
		<a href="javascript:void(0)" class="closebutton" onclick="closeNav()">&times;</a>
		<a href="mainpage.html">Home</a>
		<a href="quickroute.html">Quick Route</a>
		<a href="placesnearme.html">Places Near Me</a>
		<a href="localtraffic.html">Local Traffic</a>
    </div>

  <div id="map">
  <script  type="text/javascript" charset="UTF-8">
      
/**
 * Switches the map type to a topographical map
 *
 * @param  {H.Map} map      A HERE Map instance within the application
 * @param   {H.service.Platform} platform    A stub class to access HERE services
 */
function switchMapType(map, platform){
  var aerialMapTileService = platform.getMapTileService({
    type: 'aerial'
  });
  terrainMap = aerialMapTileService.createTileLayer(
    'maptile',
    'satellite.day',
    pixelRatio === 1 ? 256 : 512,
    'png8',
    {ppi: pixelRatio === 1 ? undefined : 320}
  );
  map.setBaseLayer(terrainMap);
}

/**
 * Boilerplate map initialization code starts below:
 */

//Step 1: initialize communication with the platform
var platform = new H.service.Platform({
  app_id: 'devportal-demo-20180625',
  app_code: '9v2BkviRwi9Ot26kp2IysQ',
  useHTTPS: true
});
var pixelRatio = window.devicePixelRatio || 1;
var defaultLayers = platform.createDefaultLayers({
  tileSize: pixelRatio === 1 ? 256 : 512,
  ppi: pixelRatio === 1 ? undefined : 320
});

//Center the map around UC San Diego
var map = new H.Map(document.getElementById('map'),
  defaultLayers.satellite.traffic,{
  center: {lat:32.877832, lng:-117.240637},
  zoom: 15,
  pixelRatio: pixelRatio
});

//Step 3: make the map interactive
// MapEvents enables the event system
// Behavior implements default interactions for pan/zoom (also on mobile touch environments)
var behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));

// Create the default UI components
var ui = H.ui.UI.createDefault(map, defaultLayers);
// Remove map settings as unnecessary
ui.removeControl('mapsettings');

//ADDED SEARCH Here

//create a group object to hold map markers
var group = new H.map.Group();

//Add the group object to the map
map.addObject(group);

//Obtain a search through which to submit search requests
var search = new H.places.Search(platform.getPlacesService()),
    searchResult, error;

//define search parameters
var params = {
//plain text search for places with the word "hotel" associated with them:
    'q': 'hotel',
//search in La Jolla, CA near UCSD
    'at': '32.8801, -117.2340'
};

//define a callback function to handle data on success
function onResult(data){
    addPlacesToMap(data.results);
}

//Define a callback function to handle errors
function onError(data) {
    error = data;
}

//Function adds markers to the map, indicating each of the located places
function addPlacesToMap(result) {
    group.addObjects(result.items.map(function (place) {
        var marker = new H.map.Marker({lat: place.position[0],
            lng: place.position[1]})
        return marker;
    }));
}

//Run a search request with the parameters, headers (empty), and callback funcs
search.request(params, {}, onResult, onError);
// Now use the map as required...
//switchMapType(map, platform);

  </script>
  </div>
</body>

</html>
